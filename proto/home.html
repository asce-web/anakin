<!doctype html>
<html lang="en">
<head>
  <title>American Society of Civil Engineers</title>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="https://cdn.asce.org/chewie/assets/futura.css"/>
  <link rel="stylesheet" href="https://cdn.asce.org/chewie/assets/glyphicons_pro_1_9_2/glyphicons/web/html_css/css/glyphicons.css"/>
  <link rel="stylesheet" href="https://cdn.asce.org/chewie/assets/glyphicons_pro_1_9_2/glyphicons-filetypes/web/html_css/css/glyphicons-filetypes.css"/>
  <link rel="stylesheet" href="https://cdn.asce.org/chewie/assets/glyphicons_pro_1_9_2/glyphicons-halflings/web/html_css/css/glyphicons-halflings.css"/>
  <link rel="stylesheet" href="https://cdn.asce.org/chewie/assets/glyphicons_pro_1_9_2/glyphicons-social/web/html_css/css/glyphicons-social.css"/>

  <link rel="stylesheet" href="https://cdn.rawgit.com/chharvey/xmeter/v6.0.0/xmeter.css"/>
  <link rel="stylesheet" href="https://cdn.rawgit.com/chharvey/bangs/v0.15.0/bangs.css"/>

  <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic"/> -->
  <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Bitter:400,400italic,700"/> -->
  <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"/> -->

  <link rel="import" href="./template/x-stat.tpl.html"/>
  <link rel="import" href="./template/x-articleteaser.tpl.html"/>
  <link rel="import" href="./template/x-memberstory.tpl.html"/>
  <script id="data" type="application/json">
{
  "promotions": [
    {
      "title": "Dream Big: Engineering Our World",
      "image": "dream-big.png",
      "cta"  : { "text": "Find a screen", "url": "#0" },
      "text" : [
        "A giant-screen film about engineering will take viewers on a journey",
        "of discovery from the world’s tallest building to a bridge higher than the clouds."
      ]
    },
    {
      "title": "Save America’s Infrastructure",
      "image": "infrastructure.png",
      "cta"  : { "text": "Read more", "url": "#0" },
      "text" : "Keep up with the latest in US infrastructure news from the American Society of Civil Engineers."
    }
  ],
  "portals": [
    {
      "title": "Membership",
      "icon" : "nameplate",
      "links": [
        { "text": "Manage My Membership", "url": "#0" },
        { "text": "Join ASCE", "url": "#0" },
        { "text": "a", "url": "#0" },
        { "text": "b", "url": "#0" }
      ]
    },
    {
      "title": "Continuing Education",
      "icon" : "education",
      "links": [
        { "text": "abcdec", "url": "#0" },
        { "text": "abcded", "url": "#0" },
        { "text": "abcdee", "url": "#0" },
        { "text": "abcdef", "url": "#0" }
      ]
    },
    {
      "title": "Publications",
      "icon" : "book-open",
      "links": [
        { "text": "abcdeg", "url": "#0" },
        { "text": "abcdeh", "url": "#0" },
        { "text": "abcdei", "url": "#0" },
        { "text": "abcdej", "url": "#0" }
      ]
    },
    {
      "title": "Conferences &amp; Events",
      "icon" : "calendar",
      "links": [
        { "text": "abcde", "url": "#0" },
        { "text": "abcde", "url": "#0" },
        { "text": "abcde", "url": "#0" },
        { "text": "abcde", "url": "#0" }
      ]
    },
    {
      "title": "Professional",
      "icon" : "address-book",
      "links": [
        { "text": "abcde", "url": "#0" },
        { "text": "abcde", "url": "#0" },
        { "text": "abcde", "url": "#0" },
        { "text": "abcde", "url": "#0" }
      ]
    },
    {
      "title": "Careers",
      "icon" : "briefcase",
      "links": [
        { "text": "abcde", "url": "#0" },
        { "text": "abcde", "url": "#0" },
        { "text": "abcde", "url": "#0" },
        { "text": "abcde", "url": "#0" }
      ]
    }
  ],
  "asce7_body": [
      "<h2>ASCE 7 Online</h2>",
      "<p>Digital access to both ASCE/SEI 7-16 and 7-10.</p>",
      "<a clas=\"c-Button\" href=\"#0\">Learn More</a>",
      "<h2>ASCE 7 Hazard Tool</h2>",
      "<p>Look up key design parameters as specified by ASCE 7.</p>",
      "<a clas=\"c-Button\" href=\"#0\">Learn More</a>"
  ],
  "cemag_body": [
    "<h2>Featured this Month</h2>",
    "<article>",
      "<h3>Topographic Transformation</h3>",
      "<p><time datetime=\"2017-06\">June 2017</time></p>",
      "<p>The formerly flat Governors Island, in New York City harbor, is home to...</p>",
      "<p><a>Read more</a></p>",
    "</article>"
  ],
  "tech_info_links": [],
  "get_involved_links": [],
  "news": [],
  "member_stories": []
}
  </script>
</head>
<body>
  <a class="h-Hidden" href="#main">skip to main content</a>
  <header>
    <h1>American Society of Civil Engineers</h1>
    <p>Header and Megamenu</p>
  </header>
  <main id="main">
    <div id="hero">
      <p>
        <span>The 2017 Report Card for America’s Infrastructure is available now.</span>
        <a href="#0">View the Report Card</a>
      </p>
    </div>
    <section id="we-represent">
      <blockquote>Civil Engineers are global leaders building a better quality of life.</blockquote>
      <h1>We Represent:</h1>
      <ul class="o-List o-Flex">
        <li class="o-List__Item o-Flex__Item"><x-stat icon="group"  number="150000" text="Members"    ctatext="Join ASCE"         ctaurl="#0"></x-stat></li>
        <li class="o-List__Item o-Flex__Item"><x-stat icon="map"    number="177"    text="Countries"  ctatext="Find a Chapter"    ctaurl="#0"></x-stat></li>
        <li class="o-List__Item o-Flex__Item"><x-stat icon="shield" number="9"      text="Institutes" ctatext="Join an Institute" ctaurl="#0"></x-stat></li>
      </ul>
    </section>
    <aside>ADVERTISEMENT</aside>
    <section id="jobs">
      <h1>Jobs</h1>
    </section>
    <section id="promotions">
      <h1 class="h-Hidden">Promotions</h1>
      <ul class="o-List" data-each="promotions">
        <template>
          <li class="o-List__Item">
            <section class="c-Promotion" style="background-image: url('{{ image }}');">
              <h1 class="c-Promotion__Hn">{{ title }}</h1>
              <p class="c-Promotion__Text">{{ text }}</p>
              <p><a class="c-Promotion__Cta c-Button" href="{{ cta.url }}">{{ cta.text }}</a></p>
            </section>
          </li>
        </template>
      </ul>
    </section>
    <section id="portals">
      <h1 class="h-Hidden">Portals</h1>
      <ol class="o-List o-Grid" style="--cols: 3;" data-each="portals">
        <template>
          <li class="o-List__Item o-Grid__Item">
            <section class="c-Portal">
              <h1>
                <i class="c-Portal__Icon h-Block glyphicons glyphicons-{{ icon }}" role="none" aria-hidden="true"></i>
                <span class="c-Portal__Hn h-Block">{{ title }}</span>
              </h1>
              <ul class="o-List c-Portal__List">
                <template>
                  <li class="o-List__Item c-Portal__List__Item">
                    <a href="{{ url }}">{{ text }}</a>
                  </li>
                </template>
              </ul>
            </section>
          </li>
        </template>
      </ol>
    </section>
    <aside>ADVERTISEMENT</aside>
    <section>
      <h1>ASCE Foundation</h1>
      <!-- QUESTION: are this graf and stat hard-coded? -->
      <p>Making a positive change in our communities is possible… but only if we
        start now, set our sights high, and work together.</p>
      <x-stat icon="donate" number="25" text="Programs Supported" ctatext="Give a Gift" ctaurl="#0"></x-stat>
    </section>
    <section id="publication-highlights">
      <h1 class="h-Hidden">Publication Highlights</h1>
      <section>
        <!-- QUESTION: which parts of this are hard-coded? -->
        <h1>ASCE 7</h1>
        <p><cite>Minimum Design Loads and Associated Criteria for Buildings and Other Structures</cite>, ASCE/SEI 7-16</p>
        <ul>
          <li><a href="#0">Provisions &amp; Commentary</a></li>
          <li><a href="#0">Guides &amp; more</a></li>
        </ul>
        <article data-if="asce7_body">
          <template><div></div></template>
        </article>
      </section>
      <section>
        <!-- QUESTION: which parts of this are hard-coded? -->
        <h1>Civil Engineering Magazine</h1>
        <p>The Official magazine of the American Society of Civil Engineers.</p>
        <ul>
          <li><a href="#0">Learn More</a></li>
        </ul>
        <article data-if="cemag_body">
          <template><div></div></template>
        </article>
      </section>
    </section>
    <section id="learn-contribute">
      <h1 class="h-Hidden">Learn &amp; Contribute</h1>
      <section id="technical-information">
        <header>
          <h1>Technical Infomation</h1>
          <p>Access the latest technical information in your discipline.</p>
        </header>
        <ul>{{ data.tech_info_links.map((item) =>
          '<li><a href="'+ item.url +'">'+ item.text +'</a></li>').join('') }}</ul>
      </section>
      <section id="get-involved">
        <header>
          <h1>Get Involved</h1>
          <p>Dedicate your time and expertise to a cause that is important to you.</p>
        </header>
        <ul>{{ data.get_involved_links.map((item) =>
          '<li><a href="'+ item.url +'">'+ item.text +'</a></li>').join('') }}</ul>
      </section>
    </section>
    <section id="whats-happening">
      <h1>What’s Happening at ASCE</h1>
      <ul>
        <li><x-articleteaser title="Emergency and Carryover Storage Project Earns OCEA" image="emergency.png" url="#0" datetime="2017-03-16"></x-articleteaser></li>
        <li><x-articleteaser title="Former Corps Chief Bostick Honored with OPAL Award" image="opal.png" url="#0" datetime="2017-03-09"></x-articleteaser></li>
      </ul>
      <p><a href="#0">Read more at <cite>ASCE News</cite></a></p>
    </section>
    <section id="member-stories">
      <h1>ASCE Member Stories</h1>
      <ul>
        <li><x-memberstory name="Katie Haslett" title="Student Member" image="Haslett.png">The impact of seeing successful...</x-memberstory></li>
        <li><x-memberstory name="Nakeia Jackson" title="2017 New Faces of Civil Engineering" image="Jackson.png">When you become an engineer...</x-memberstory></li>
        <li><x-memberstory name="Damani Nkeiruka" title="Distinguished Member" image="Nkeiruka.png">There are so many infrastructure and...</x-memberstory></li>
      </ul>
    </section>
    <p><a href="#0">Join ASCE</a></p>
  </main>
  <footer>
    <p>ASCE Footer</p>
  </footer>
  <a class="h-Hidden" href="#top">jump to top</a>
  <!-- <script src="https://code.jquery.com/jquery-2.2.3.min.js" integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo=" crossorigin="anonymous"></script> -->
  <script>
    let global = {
      /** set to false to disable experimental web components features*/ ENABLE_WEB_COMPONENTS: true,
      template: {
        x_stat         : document.querySelector('link[href*="x-stat"]'         ).import.querySelector('template#x-stat'         ),
        x_articleteaser: document.querySelector('link[href*="x-articleteaser"]').import.querySelector('template#x-articleteaser'),
        x_memberstory  : document.querySelector('link[href*="x-memberstory"]'  ).import.querySelector('template#x-memberstory'  ),
      },
      data: JSON.parse(document.querySelector('script#data').textContent),
    }

    function populateElementWithData(element, data, generator) {
      if (generator) {
        element.appendChild(generator.call(null, element.querySelector('template').content.cloneNode(true), data))
      } else {
        element.innerHTML += data.toString()
      }
    }
    function populateListWithData(list, data, generator) {
      data.forEach(function (d) {
        if (generator) {
          list.appendChild(generator.call(null, list.querySelector('template').content.cloneNode(true), d))
        } else {
          list.innerHTML += d.toString()
        }
      })
    }
    function populateNamedElementWithData(name, generator) {
      populateElementWithData(document.querySelector(`[data-if="${name}"]`), global.data[name] || '', generator)
    }
    function populateNamedListWithData(name, generator) {
      populateListWithData(document.querySelector(`[data-each="${name}"]`), global.data[name] || [], generator)
    }
    populateNamedListWithData('promotions', function (frag, datum) {
      frag.querySelector('.c-Promotion').style.setProperty('background-image', `url('${datum.image}')`)
      frag.querySelector('.c-Promotion__Hn'  ).innerHTML = datum.title
      frag.querySelector('.c-Promotion__Cta' ).setAttribute('href', datum.cta.url)
      frag.querySelector('.c-Promotion__Cta' ).textContent = datum.cta.text
      frag.querySelector('.c-Promotion__Text').innerHTML = ((typeof datum.text === 'string') ? datum.text : datum.text.join(''))
      return frag
    })
    populateNamedListWithData('portals', function (frag, datum) {
      frag.querySelector('.c-Portal__Icon').className = frag.querySelector('.c-Portal__Icon').className.replace('{{ icon }}', datum.icon)
      frag.querySelector('.c-Portal__Hn'  ).innerHTML = datum.title
      populateListWithData(frag.querySelector('.c-Portal__List'), datum.links, function (innerfrag, link) {
        innerfrag.querySelector('.c-Portal__List__Item > a').setAttribute('href', link.url)
        innerfrag.querySelector('.c-Portal__List__Item > a').textContent = link.text
        return innerfrag
      })
      return frag
    })
    populateNamedElementWithData('asce7_body', function (frag, datum) {
      frag.querySelector('div').innerHTML = ((typeof datum === 'string') ? datum : datum.join(''))
      return frag
    })
    populateNamedElementWithData('cemag_body', function (frag, datum) {
      frag.querySelector('div').innerHTML = ((typeof datum === 'string') ? datum : datum.join(''))
      return frag
    })


  </script>
  <script type="module">
    import { XStat          } from './class/XStat.class.js'
    import { XArticleTeaser } from './class/XArticleTeaser.class.js'
    import { XMemberStory   } from './class/XMemberStory.class.js'
    window.customElements.define('x-stat', XStat)
    window.customElements.define('x-articleteaser', XArticleTeaser)
    window.customElements.define('x-memberstory', XMemberStory)
  </script>
</body>
</html>
